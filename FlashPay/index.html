<!DOCTYPE html><html lang="fr"><head><meta charset="UTF-8"><title>Carte NFC-SparkLink</title><meta name="viewport" content="width=device-width, initial-scale=1.0"><!-- Scripts avec defer pour un chargement plus rapide --><link rel="stylesheet" href="https://paytech.sn/cdn/paytech.min.css"><script src="https://paytech.sn/cdn/paytech.min.js" defer></script><style>*,*::before,*::after{box-sizing:border-box}
body{font-family:'Poppins',sans-serif;background-color:#2a538b;margin:0;padding:20px;display:flex;align-items:center;justify-content:center;height:100vh}
form{background-color:#fff;padding:25px;border-radius:10px;width:100%;max-width:500px;box-shadow:0 2px 10px rgba(0,0,0,0.1)}
label{margin:15px 0 5px;display:block;color:#333}
input,select,button{width:100%;font-size:14px;margin-bottom:12px;padding:12px;border-radius:5px}
input,select{border:1px solid #ccc}
button{background-color:#2a538b;color:#fff;border:none;cursor:pointer;transition:background-color 0.3s ease}
button[disabled]{background-color:#aaa;cursor:not-allowed}.loader{display:none;margin:10px auto;width:40px;height:40px;border:5px solid #f3f3f3;border-top:5px solid #2a538b;border-radius:50%;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}</style></head><body><form id="nfcForm"><h2 style="text-align:center;">Commande de Carte NFC</h2><input type="hidden" id="fullName" value="Unknow Unknow"><label for="pattern">Motif(optionnel):</label><input type="text" id="pattern"><label for="phone">Téléphone:</label><input type="tel" id="phone" placeholder="772457199"><label for="amount">Montant(XOF):</label><input type="number" id="amount" placeholder="5000"><label for="tp">Moyen de paiement:</label><select id="tp"><option value="" disabled>-- Sélectionner --</option><option value="Orange Money">Orange Money</option><option value="Wave" selected>Wave</option><option value="Tigo Cash">Free Money Mix by Yass</option><option value="Wizall">Wizall</option><option value="Carte Bancaire">Carte Bancaire</option></select><div class="loader" id="loader"></div><button type="button" id="payBtn" onclick="validateAndPay()">Payer et Commander</button></form><script defer>const PAYTECH_JSONP_URL='https://script.google.com/macros/s/AKfycbyly7xozHbeDrw9s3IQhcZpDj-MQwLGM47MweZ9KRx4p4jJ9NB37xDn3D05nzuDDuQb2w/exec';function validateAndPay(){const btn=document.getElementById("payBtn");const loader=document.getElementById("loader");const fullName=document.getElementById("fullName").value.trim();const phone=document.getElementById("phone").value.trim();const amount=document.getElementById("amount").value.trim();const tp=document.getElementById("tp").value;const motif=document.getElementById("pattern").value.trim()||"PAS DE MOTIF";const missing=[];if(!fullName)missing.push("Nom complet");if(!phone)missing.push("Téléphone");if(!amount)missing.push("Montant");if(!tp)missing.push("Moyen de paiement");if(missing.length){alert("Veuillez remplir les champs suivants :\n- "+missing.join("\n- "));return}
if(!/^7[05678]\d{7}$/.test(phone)){alert("Numéro invalide. Format attendu : 772457199");return}
if(!/^[^\d\s]+ [^\d\s]+$/.test(fullName)){alert("Nom complet invalide. Format : Prénom Nom");return}
btn.disabled=!0;loader.style.display="block";const callback="handlePayTechResponse";const url=`${PAYTECH_JSONP_URL}?motif=${encodeURIComponent(motif)}&montant=${amount}&telephone=${phone}&full_name=${encodeURIComponent(fullName)}&tp=${encodeURIComponent(tp)}&callback=${callback}`;const script=document.createElement("script");script.src=url;document.body.appendChild(script)}
function handlePayTechResponse(response){const btn=document.getElementById("payBtn");const loader=document.getElementById("loader");loader.style.display="none";btn.disabled=!1;if(response.success===1&&response.redirect_url){new PayTech({}).withOption({tokenUrl:response.redirect_url,prensentationMode:PayTech.OPEN_IN_POPUP}).send()}else{alert("Erreur PayTech : "+(response.error||"inconnue"));console.error(response)}}</script></body></html>
